import telebot

TOKEN = 'YOUR_TELEGRAM_BOT_TOKEN'

# Создаем экземпляр бота
bot = telebot.TeleBot(TOKEN)

# Словарь для хранения данных по категориям
categories = {
    'Продукты': 0,
    'Транспорт': 0,
    'Развлечение': 0,
    'Подписки': 0,
    'Зарплата': 0
}

@bot.message_handler(commands=['start'])
def start(message):
    # Приветственное сообщение
    response = "Привет! Я чат-бот для учета финансовых расходов.\n" \
               "Доступные категории:\n" \
               "- Продукты\n" \
               "- Транспорт\n" \
               "- Развлечение\n" \
               "- Подписки\n" \
               "- Зарплата\n\n" \
               "Для внесения данных используйте команды:\n" \
               "/add <категория> <сумма>\n" \
               "/total"

    bot.reply_to(message, response)

@bot.message_handler(commands=['add'])
def add_expense(message):
    # Разбиваем сообщение на аргументы
    args = message.text.split()[1:]
    if len(args) != 2:
        bot.reply_to(message, "Неверный формат команды. Используйте: /add <категория> <сумма>")
        return

    category, amount = args
    amount = float(amount)

    if category in categories:
        categories[category] += amount
        bot.reply_to(message, f"Затраты в категории '{category}' успешно добавлены: {amount}")
    else:
        bot.reply_to(message, "Неверная категория")

@bot.message_handler(commands=['total'])
def show_total(message):
    total_expenses = categories['Зарплата'] - (categories['Транспорт'] + categories['Продукты'] +
                                               categories['Развлечение'] + categories['Подписки'])

    response = "Общий итог:\n" \
               f"Зарплата: {categories['Зарплата']}\n" \
               f"Продукты: {categories['Продукты']}\n" \
               f"Транспорт: {categories['Транспорт']}\n" \
               f"Развлечение: {categories['Развлечение']}\n" \
               f"Подписки: {categories['Подписки']}\n\n" \
               f"Итог: {total_expenses}"

    bot.reply_to(message, response)

# Запускаем бота
bot.polling()